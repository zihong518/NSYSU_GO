<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="all.css">
    <title>Document</title>
    <!-- <script src="https://cdn.jsdelivr.net/npm/vue@2"></script> -->
    <!-- vue 3 -->
    <script src="https://unpkg.com/vue@next"></script>
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">Navbar</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                          <a class="nav-link active" aria-current="page" href="#">Home</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="#">Features</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="#">Pricing</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
                        </li>
                      </ul>
                </div>
            </div>
        </nav>
    </header>
    <div class="container-fluid  " >
        <div class="row">
            <div class="col-2 bg-light">
                <ul class="nav nav-pills mb-3 flex-column" id="pills-tab" role="tablist">
                    <li class="nav-item py-3" role="presentation">
                      <a class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">Home</a>
                    </li>
                    <li class="nav-item py-3" role="presentation">
                      <a class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false">Profile</a>
                    </li>
                    <li class="nav-item py-3" role="presentation">
                      <a class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" href="#pills-contact" role="tab" aria-controls="pills-contact" aria-selected="false">Contact</a>
                    </li>
                </ul>
            </div>
            <div class="col-6" id="app">
                <!-- <form action="" > -->
                    <div class="mb-3">
                        <label for="exampleInputEmail1" class="form-label fs-3">產品名稱</label>
                        <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp">
                    </div>
                    <div class="mb-3">
                        <label for="exampleInputEmail1" class="form-label fs-3">產品描述</label>
                        <small>限500字</small>
                        <textarea type="textarea" class="form-control" rows="5"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="exampleInputEmail1" class="form-label fs-3">產品相片</label>
                        <div class="d-flex">
                        </div>
                        <div class="mb-3">
                            <label for="formFileMultiple" class="form-label">Multiple files input example</label>
                            <input class="form-control" type="file" id="formFileMultiple" multiple>
                          </div>
                    </div>
                    <div class="mb-3" >
                        <label for="exampleInputEmail1" class="form-label fs-3 d-block">產品規格</label>
                        <input type="text" v-model="thing"  >
                        <button type="button" @click="addCategory(thing)" class="btn btn-primary">送出</button>
                    </div>
                    <ul>
                        目前規格：
                        <li v-for="category in categories">
                            {{category.content}}
                            <input  type="text" v-if="category.bool_modify" v-model="modification" @keyup.enter="modifyContent(modification,category)">
                            <button type="button" @click="deleteCategory(category)" class="btn btn-danger">刪除</button>
                            <button type="button" @click="modifyCategory(category)"  class="btn btn-success">修改</button>
                        </li>
                    </ul>
                    <div> 
                        <p class="fs-2">新增種類</p>
                        <div v-for="(category,index) in categories">
                            <p>{{category.content}}</p>
                            <input type="text" v-model="type[index]">
                            <button type="button" @click="addType(type[index],category)" class="btn btn-primary">送出</button>
                        </div>
                        
                    </div>
                    <ul class="mt-5">
                        <p class="fs-2">設定</p>
                        <li v-for="category in categories">
                            <h1 class="fs-4 text-danger">{{category.content}}</h1>
                            <ul >
                                <li v-for="type in category.types">
                                    {{type}}
                                </li>
                            </ul>
                        </li>
                    </ul>
                    <div class="mt-5">
                        <p class="fs-2 text-danger">表格</p>
                        <table class="table">
                            <thead>
                              <tr>
                                <td scope="col" v-for="category in categories">{{category.content}}</td>
                                <td>價格</td>
                                <td>數量</td>
                            </tr>
                            </thead>
                            <tbody>
                              <tr v-for="product in products">
                                <td  v-if="product.type1">{{product.type1}}</td>
                                <td  v-if="product.type2">{{product.type2}}</td>
                                <td  class="col-3"> <input type="text" v-model="product.price" class="col-3"> </td>
                                <td  class="col-3"> <input type="text" v-model="product.quantity" class="col-3"></td>
                              </tr>
                            </tbody>
                          </table>
                    </div>
                    價格設定


                      <button type="submit" class="btn btn-primary">設定產品規格</button>
                </form>
            </div>
            
        </div>
    </div>

    <!-- <script src="../js/vue3.js"></script> -->
</body>
<script>
    const vm = Vue.createApp({
    data(){
        return{
            thing:"",
            categories:[
                {
                    content:"顏色",
                    bool_modify:false,
                    types:["白色","紅色"]
                },
                {
                    content:"尺寸",
                    bool_modify:false,
                    types :["大","小"]
                }
            ],
            modification:"",
            price:"",
            quantity:"",
            type:["",""],
        }
    },
    methods:{
        addCategory(val){
            if(Object.keys(this.categories).length>=2){
                alert("最多兩項")
            }
            else if(val==""){
                alert("請輸入文字")
            }
            else(
                console.log(this.products),
                this.categories.push({content:val,bool_modify:false,types:[]})
            )
        },
        deleteCategory(val){
            
            this.categories.splice(this.categories.indexOf(val),1)
        },
        modifyCategory(position){
            this.categories[this.categories.indexOf(position)].bool_modify=true
        },
        modifyContent(item,position){
            this.categories[this.categories.indexOf(position)].content=item
            this.categories[this.categories.indexOf(position)].bool_modify=false
        },
        addType(item,position){
            this.categories[this.categories.indexOf(position)].types.push(item)
        },
    },
    computed: {
        products() {
            let result=[]
            // 要處理長度問題
            if(this.categories.length==1){
                for(let i=0;i<this.categories[Object.keys(this.categories)[0]].types.length;i++){
                    result.push({
                        type1:this.categories[Object.keys(this.categories)[0]].types[i],
                        price:"",
                        quantity:"",
                    })
                }
            }
            if(this.categories.length==2){
                for(let i=0;i<this.categories[Object.keys(this.categories)[0]].types.length;i++){
                    for(let j=0;j<this.categories[Object.keys(this.categories)[1]].types.length;j++){
                        result.push({
                            type1:this.categories[Object.keys(this.categories)[0]].types[i],
                            type2:this.categories[Object.keys(this.categories)[1]].types[j],
                            price:"",
                            quantity:"",
                        })
                    }
                }
            }
           
            return result
             
        }
    },
});

vm.mount('#app');
</script>
</html>